# Установка и запуск Sparkaph

## Требования

- Python 3.8 или выше
- MongoDB
- Telegram Bot API токены

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/your-username/sparkaph.git
cd sparkaph
```

2. Создайте виртуальное окружение:
```bash
# Для Windows
python -m venv venv
venv\Scripts\activate

# Для Linux/Mac
python3 -m venv venv
source venv/bin/activate
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте файл `.env` в корневой директории проекта и заполните его следующими переменными:
```
USER_BOT_TOKEN=ваш_токен_пользовательского_бота
ADMIN_BOT_TOKEN=ваш_токен_админ_бота
INFLUENCER_BOT_TOKEN=ваш_токен_блогерского_бота
MONGODB_URI=ваш_uri_mongodb
CHANNEL_ID=@ваш_канал
ADMIN_ID=ваш_telegram_id
BOT_TYPE=all
```

## Запуск

### Запуск всех ботов

Для запуска всех ботов одновременно используйте команду:
```bash
python run.py
```

### Запуск отдельных ботов

Для запуска отдельных ботов используйте следующие команды:

```bash
# Пользовательский бот
python -m bots.user_bot

# Админ-бот
python -m bots.admin_bot

# Блогерский бот
python -m bots.influencer_bot
```

## Структура проекта

```
sparkaph/
├── bots/
│   ├── user_bot.py      # Бот для пользователей
│   ├── admin_bot.py     # Бот для администраторов
│   └── influencer_bot.py # Бот для блогеров
├── database/
│   ├── models.py        # Модели данных
│   └── operations.py    # Операции с базой данных
├── utils/
│   ├── keyboards.py     # Клавиатуры
│   ├── states.py        # Состояния FSM
│   └── helpers.py       # Вспомогательные функции
├── config.py           # Конфигурация
├── requirements.txt    # Зависимости
├── run.py             # Скрипт запуска
└── INSTALL.md         # Инструкции по установке
```

## Настройка MongoDB

1. Создайте аккаунт на [MongoDB Atlas](https://www.mongodb.com/cloud/atlas)
2. Создайте новый кластер
3. Получите URI для подключения
4. Добавьте URI в файл `.env`

## Создание Telegram ботов

1. Создайте трех ботов через [@BotFather](https://t.me/BotFather):
   - Пользовательский бот
   - Админ-бот
   - Блогерский бот
2. Получите токены для каждого бота
3. Добавьте токены в файл `.env`

## Создание канала

1. Создайте канал в Telegram
2. Добавьте ботов в администраторы канала
3. Укажите ID канала в файле `.env`

## Первый запуск

1. Запустите все боты:
```bash
python run.py
```

2. Проверьте работу ботов:
   - Отправьте команду `/start` пользовательскому боту
   - Войдите в админ-панель через админ-бота
   - Проверьте доступ блогерского бота

## Обновление

Для обновления проекта:

1. Остановите ботов
2. Получите последние изменения:
```bash
git pull
```
3. Обновите зависимости:
```bash
pip install -r requirements.txt
```
4. Запустите ботов заново:
```bash
python run.py
```

## Устранение неполадок

1. Проверьте логи на наличие ошибок
2. Убедитесь, что все переменные окружения установлены правильно
3. Проверьте подключение к MongoDB
4. Убедитесь, что боты имеют необходимые права в канале

## Поддержка

При возникновении проблем создайте issue в репозитории проекта или обратитесь к администратору. 